
{% asset 'ckanext-sfb-layout/stages-css' %}
{% asset 'ckanext-sfb-layout/stages-js' %}

{% set s1 = stages[0] or 'active' %}
{% set s2 = stages[1] or 'uncomplete' %}
{% set s3 =  stages[2] or 'uncomplete' %}
{% if h.is_plugin_enabled('organization_group') %}
  {% set s4 = stages[3] or 'uncomplete' %}
{% endif %}
{% if h.is_plugin_enabled('semantic_media_wiki') %}
  {% set s5 = stages[4] or 'uncomplete' %}
{% endif %}

{% if s1 != 'uncomplete' %}{% set class = 'stage-1' %}{% endif %}
{% if s2 != 'uncomplete' %}{% set class = 'stage-2' %}{% endif %}
{% if s3 != 'uncomplete' %}{% set class = 'stage-3' %}{% endif %}
{% if h.is_plugin_enabled('organization_group') %}
  {% if s4 != 'uncomplete' %}{% set class = 'stage-4' %}{% endif %}
{% endif %}
{% if h.is_plugin_enabled('semantic_media_wiki') %}
  {% if s5 != 'uncomplete' %}{% set class = 'stage-5' %}{% endif %}
{% endif %}

<ol class="stages stage-4">
  <li class="first {{ s1 }}">
    {% if s1 != 'complete' %}
      <span class="highlight">{{ _('dataset') }}</span>
    {% else %}
      <button class="highlight" name="save" value="go-dataset" type="submit">{{ _('dataset') }}</button>
    {% endif %}
  </li>
    
  <li class="second {{ s2 }}">
    {% if s2 != 'complete' %}
      <span class="highlight">{{ _('Add data') }}</span>
    {% else %}
      {% if s1 == 'active' %}
        {# stage 1 #}
        <button class="highlight" name="save" value="go-resources" type="submit">{{ _('Add data') }}</button>
      {% else %}
        {% link_for _('Add data'), named_route='dataset.new', class_="highlight" %}
      {% endif %}
    {% endif %}
  </li>

  <li class="third {{ s3 }}">
        {% if s3 != 'complete' %}
        <span class="highlight">{{ _('Metadata') }}</span>
        {% else %}
        <span class="highlight">{{ _('Metadata') }}</span>
        {% endif %}
    </li>

{% if h.is_plugin_enabled('organization_group') %}
  <li class="forth {{ s4 }}">
    {% if s4 != 'complete' %}
      <span class="highlight">{{ _('Ownership') }}</span>
    {% else %}
        <span class="highlight">{{ _('Set Ownership') }}</span>
    {% endif %}
  </li>
{% endif %}

{% if h.is_plugin_enabled('semantic_media_wiki') %}
  <li class="last {{ s5 }}">
    {% if s5 != 'complete' %}
      <span class="highlight">{{ _('Equipment(s)') }}</span>
    {% else %}
        <span class="highlight">{{ _('Equipment(s)') }}</span>
    {% endif %}
  </li>
{% endif %}
</ol>
